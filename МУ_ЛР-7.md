<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# –ú–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ ‚Ññ7

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–∞–∑–æ–≤—ã–π CI (GitHub Actions)**
(–Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞ [mlops‚Äëflight‚Äëdelay](https://github.com/Irina-64/mlops-flight-delay))

***

## üéØ –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã

–ù–∞—É—á–∏—Ç—å—Å—è –ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è ML‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ API), –∞ —Ç–∞–∫–∂–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å **Continuous Integration (CI)** –Ω–∞ GitHub Actions, —á—Ç–æ–±—ã —Ç–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –∏–ª–∏ pull request.

***

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **pytest** ‚Äî —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Python
- **GitHub Actions** ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ CI/CD –æ—Ç GitHub
- **FastAPI TestClient** ‚Äî –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ì–æ—Ç–æ–≤—ã–π API –∏–∑ –õ–†6 (`src/api.py`)

***

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è)

```
mlops-flight-delay/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ ci.yml              # –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CI
‚îú‚îÄ‚îÄ data/
‚îú‚îÄ‚îÄ models/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api.py
‚îÇ   ‚îú‚îÄ‚îÄ preprocess.py
‚îÇ   ‚îî‚îÄ‚îÄ utils.py
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py             # —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è pytest
‚îÇ   ‚îú‚îÄ‚îÄ test_preprocess.py      # —Ç–µ—Å—Ç—ã –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ test_api.py             # —Ç–µ—Å—Ç—ã API
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ README.md
```


***

## üß™ –ß–∞—Å—Ç—å 1: –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### –®–∞–≥ 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pytest

–î–æ–±–∞–≤—å—Ç–µ –≤ `requirements.txt`:

```
pytest>=7.4.0
httpx>=0.24.0  # –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è FastAPI
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

```bash
pip install -r requirements.txt
```


***

### –®–∞–≥ 2. –°–æ–∑–¥–∞–Ω–∏–µ `tests/conftest.py`

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã (fixtures) –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤.

```python
import pytest
from fastapi.testclient import TestClient
from src.api import app

@pytest.fixture
def client():
    """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è FastAPI"""
    return TestClient(app)

@pytest.fixture
def sample_flight_data():
    """–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –æ —Ä–µ–π—Å–µ"""
    return {
        "carrier": "AA",
        "dep_hour": 9,
        "distance": 550,
        "weather_delay": 0.0
    }
```


***

### –®–∞–≥ 3. –¢–µ—Å—Ç—ã –¥–ª—è API (`tests/test_api.py`)

```python
def test_root_endpoint(client):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞"""
    response = client.get("/")
    assert response.status_code in [200, 404]  # –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞—à–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

def test_predict_endpoint_returns_json(client, sample_flight_data):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ /predict –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON"""
    response = client.post("/predict", json=sample_flight_data)
    assert response.status_code == 200
    assert response.headers["content-type"] == "application/json"

def test_predict_output_format(client, sample_flight_data):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞ /predict"""
    response = client.post("/predict", json=sample_flight_data)
    json_data = response.json()
    assert "delay_probability" in json_data
    assert isinstance(json_data["delay_probability"], float)

def test_predict_probability_range(client, sample_flight_data):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ [0, 1]"""
    response = client.post("/predict", json=sample_flight_data)
    prob = response.json()["delay_probability"]
    assert 0.0 <= prob <= 1.0

def test_predict_with_invalid_data(client):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"""
    response = client.post("/predict", json={"invalid": "data"})
    # –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ API - –º–æ–∂–µ—Ç –±—ã—Ç—å 422 –∏–ª–∏ 500
    assert response.status_code in [422, 500]
```


***

### –®–∞–≥ 4. –¢–µ—Å—Ç—ã –¥–ª—è –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∏ (`tests/test_preprocess.py`)

```python
import pandas as pd
import pytest

def test_preprocess_removes_duplicates():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤"""
    from src.preprocess import remove_duplicates
    
    data = pd.DataFrame({
        'col1': [1, 2, 2, 3],
        'col2': ['a', 'b', 'b', 'c']
    })
    result = remove_duplicates(data)
    assert len(result) == 3

def test_preprocess_handles_missing_values():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–ø—É—Å–∫–æ–≤"""
    from src.preprocess import handle_missing
    
    data = pd.DataFrame({
        'col1': [1, None, 3],
        'col2': [4, 5, None]
    })
    result = handle_missing(data)
    assert result.isnull().sum().sum() == 0

def test_feature_engineering_creates_columns():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤"""
    from src.preprocess import create_features
    
    data = pd.DataFrame({
        'dep_time': [900, 1430, 2100]
    })
    result = create_features(data)
    assert 'dep_hour' in result.columns
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –≤ `src/preprocess.py` –Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –≤—ã–Ω–µ—Å–∏—Ç–µ –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏.

***

### –®–∞–≥ 5. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
pytest

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
pytest -v

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
pytest tests/test_api.py

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest --cov=src --cov-report=html
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç:

```
==================== test session starts ====================
collected 7 items

tests/test_api.py .....                               [ 71%]
tests/test_preprocess.py ..                           [100%]

==================== 7 passed in 2.34s ====================
```


***

## üîÑ –ß–∞—Å—Ç—å 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions CI

### –®–∞–≥ 6. –°–æ–∑–¥–∞–Ω–∏–µ workflow-—Ñ–∞–π–ª–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.github/workflows/ci.yml`:

```yaml
name: CI Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        python-version: ['3.9', '3.10', '3.11']
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Set up Python ${{ matrix.python-version }}
        uses: actions/setup-python@v4
        with:
          python-version: ${{ matrix.python-version }}
      
      - name: Cache pip dependencies
        uses: actions/cache@v3
        with:
          path: ~/.cache/pip
          key: ${{ runner.os }}-pip-${{ hashFiles('requirements.txt') }}
          restore-keys: |
            ${{ runner.os }}-pip-
      
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
      
      - name: Run tests
        run: |
          pytest -v --cov=src --cov-report=term-missing
      
      - name: Upload coverage reports
        if: matrix.python-version == '3.10'
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage.xml
          flags: unittests
          name: codecov-umbrella
```


***

### –®–∞–≥ 7. –ö–æ–º–º–∏—Ç –∏ push –≤ GitHub

```bash
git add .
git commit -m "Add tests and CI workflow"
git push origin main
```


***

### –®–∞–≥ 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã CI

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É **Actions**
3. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à workflow **CI Pipeline**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ jobs –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —É—Å–ø–µ—à–Ω–æ (–∑–µ–ª—ë–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ ‚úÖ)

–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å:

- –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ failed job
- –ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏
- –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –∏ —Å–¥–µ–ª–∞–π—Ç–µ –Ω–æ–≤—ã–π push

***

## üöÄ –ß–∞—Å—Ç—å 3: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è CI —Å Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –®–∞–≥ 9. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏ Docker-–æ–±—Ä–∞–∑–∞

–û–±–Ω–æ–≤–∏—Ç–µ `.github/workflows/ci.yml`:

```yaml
jobs:
  test:
    # ... –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —à–∞–≥–∏ ...
  
  build-docker:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      
      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v2
      
      - name: Login to Docker Hub
        uses: docker/login-action@v2
        with:
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}
      
      - name: Build and push Docker image
        uses: docker/build-push-action@v4
        with:
          context: .
          push: true
          tags: |
            ${{ secrets.DOCKER_USERNAME }}/flight-delay-api:latest
            ${{ secrets.DOCKER_USERNAME }}/flight-delay-api:${{ github.sha }}
          cache-from: type=registry,ref=${{ secrets.DOCKER_USERNAME }}/flight-delay-api:buildcache
          cache-to: type=registry,ref=${{ secrets.DOCKER_USERNAME }}/flight-delay-api:buildcache,mode=max
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ secrets –≤ GitHub:**

1. Settings ‚Üí Secrets and variables ‚Üí Actions
2. –î–æ–±–∞–≤—å—Ç–µ `DOCKER_USERNAME` –∏ `DOCKER_PASSWORD`

***

## üìä –ß–∞—Å—Ç—å 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ badge —Å—Ç–∞—Ç—É—Å–∞

–í `README.md` –¥–æ–±–∞–≤—å—Ç–µ badge:

```markdown
# Flight Delay Prediction

![CI Status](https://github.com/YOUR_USERNAME/mlops-flight-delay/workflows/CI%20Pipeline/badge.svg)

...
```


***

## ‚úÖ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Ä–∞–±–æ—Ç—ã

- `tests/conftest.py` ‚Äî —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- `tests/test_api.py` ‚Äî —Ç–µ—Å—Ç—ã API
- `tests/test_preprocess.py` ‚Äî —Ç–µ—Å—Ç—ã –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∏
- `.github/workflows/ci.yml` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CI
- –£—Å–ø–µ—à–Ω—ã–π run –≤ GitHub Actions (—Å–∫—Ä–∏–Ω—à–æ—Ç)

***

## üí° Best Practices –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ML

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤:**
    - Unit-—Ç–µ—Å—Ç—ã (—Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö)
    - Integration-—Ç–µ—Å—Ç—ã (API endpoints)
    - Model-—Ç–µ—Å—Ç—ã (–ø—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫)
2. **–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
    - –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö/–≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫—Ä–∞–µ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ (–ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ, null)
    - –î–∏–∞–ø–∞–∑–æ–Ω—ã –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π (0-1 –¥–ª—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π)
    - –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Ç–≤–µ—Ç–∞—Ö API
3. **–ß—Ç–æ –ù–ï —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ unit-—Ç–µ—Å—Ç—ã:**
    - –¢–æ—á–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ (—ç—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ evaluate)
    - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–¥–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ benchmarks)

***

## üí¨ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã

| –í–æ–ø—Ä–æ—Å | –û—Ç–≤–µ—Ç |
| :-- | :-- |
| **1. –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã?** | –î–ª—è —Ä–∞–Ω–Ω–µ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫, –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö. |
| **2. –ß—Ç–æ —Ç–∞–∫–æ–µ CI (Continuous Integration)?** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. |
| **3. –ö–∞–∫–∏–µ —Ç–∏–ø—ã —Ç–µ—Å—Ç–æ–≤ –º—ã –Ω–∞–ø–∏—Å–∞–ª–∏?** | Unit-—Ç–µ—Å—Ç—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –∏ integration-—Ç–µ—Å—Ç—ã –¥–ª—è API. |
| **4. –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ–∞–π–ª conftest.py?** | –°–æ–¥–µ—Ä–∂–∏—Ç –æ–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã (fixtures) –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–µ—Å—Ç–∞—Ö. |
| **5. –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ç–µ—Å—Ç?** | `pytest tests/test_api.py::test_predict_output_format` |
| **6. –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç `uses: actions/setup-python@v4`?** | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–≥–æ GitHub Action –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Python. |
| **7. –ó–∞—á–µ–º –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å pip dependencies?** | –î–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è CI - –Ω–µ –Ω—É–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ —Å–∫–∞—á–∏–≤–∞—Ç—å –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –ø–∞–∫–µ—Ç—ã. |
| **8. –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –º–æ–¥–µ–ª–∏?** | –°–æ–∑–¥–∞—Ç—å `tests/test_model.py` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –º–µ—Ç—Ä–∏–∫ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö. |
| **9. –ß—Ç–æ —Ç–∞–∫–æ–µ TestClient –≤ FastAPI?** | –û–±—ä–µ–∫—Ç –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞. |
| **10. –ö–∞–∫ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏?** | `pytest --cov=src --cov-report=html` –∏ –æ—Ç–∫—Ä—ã—Ç—å `htmlcov/index.html`. |


***

## üìä –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –ú–∏–Ω–∏–º—É–º –¥–ª—è –∑–∞—á–µ—Ç–∞ |
| :-- | :-- |
| **–¢–µ—Å—Ç—ã API** | –ú–∏–Ω–∏–º—É–º 3 —Ç–µ—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–µ —Ä–∞–∑–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã |
| **–¢–µ—Å—Ç—ã –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∏** | –ú–∏–Ω–∏–º—É–º 2 —Ç–µ—Å—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö |
| **CI workflow** | –§–∞–π–ª `.github/workflows/ci.yml` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω |
| **GitHub Actions** | –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –≤ CI (–∑–µ–ª—ë–Ω—ã–π —Å—Ç–∞—Ç—É—Å) |
| **README** | –û–±–Ω–æ–≤–ª—ë–Ω —Å badge —Å—Ç–∞—Ç—É—Å–∞ CI |
| **–ü–æ–∫—Ä—ã—Ç–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)** | > 60% –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ |


***

## üßæ –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ pytest

```
======================== test session starts ========================
platform linux -- Python 3.10.12, pytest-7.4.3, pluggy-1.3.0
rootdir: /home/user/mlops-flight-delay
plugins: cov-4.1.0
collected 7 items

tests/test_api.py .....                                       [ 71%]
tests/test_preprocess.py ..                                   [100%]

---------- coverage: platform linux, python 3.10.12 ----------
Name                     Stmts   Miss  Cover   Missing
------------------------------------------------------
src/api.py                  25      2    92%   45-46
src/preprocess.py           48      5    90%   112-116
------------------------------------------------------
TOTAL                       73      7    90%

======================== 7 passed in 3.42s =========================
```


***

## üß± –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

1. **–î–æ–±–∞–≤–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä—ã:**

```yaml
- name: Lint with flake8
  run: |
    pip install flake8
    flake8 src/ --max-line-length=100
```

2. **–î–æ–±–∞–≤–∏—Ç—å type checking:**

```yaml
- name: Type check with mypy
  run: |
    pip install mypy
    mypy src/
```

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å codecov.io** –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∫—Ä—ã—Ç–∏—è
4. **Smoke tests –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è** (–ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ API –æ—Ç–≤–µ—á–∞–µ—Ç –≤ production)
5. **Matrix testing** (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Python)

***

## üìö –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤
‚úÖ CI pipeline, –∑–∞–ø—É—Å–∫–∞—é—â–∏–π—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚úÖ Badge —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º —Ç–µ—Å—Ç–æ–≤ –≤ README
‚úÖ –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–¥–µ–ø–ª–æ—é —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

–≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π MLOps-–ø—Ä–∞–∫—Ç–∏–∫–∏!

